[gd_scene load_steps=25 format=2]

[ext_resource path="res://Resources/Art/Slime/slime_idle.png" type="Texture" id=1]
[ext_resource path="res://Resources/UI/Scenarios/TheSecondLaw.gd" type="Script" id=2]
[ext_resource path="res://Resources/Scenes/Slime/SlimeMaterial.tres" type="Material" id=3]
[ext_resource path="res://Resources/UI/ThemeMAIN.tres" type="Theme" id=4]

[sub_resource type="AtlasTexture" id=22]
atlas = ExtResource( 1 )
region = Rect2( 0, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=23]
atlas = ExtResource( 1 )
region = Rect2( 16, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=24]
atlas = ExtResource( 1 )
region = Rect2( 32, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=25]
atlas = ExtResource( 1 )
region = Rect2( 48, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=26]
atlas = ExtResource( 1 )
region = Rect2( 64, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=27]
atlas = ExtResource( 1 )
region = Rect2( 80, 0, 16, 16 )

[sub_resource type="SpriteFrames" id=30]
animations = [ {
"frames": [ SubResource( 22 ), SubResource( 23 ), SubResource( 24 ), SubResource( 25 ), SubResource( 26 ), SubResource( 27 ) ],
"loop": true,
"name": "default",
"speed": 7.02
} ]

[sub_resource type="Shader" id=29]
code = "shader_type canvas_item;


uniform vec4 white_color: hint_color = vec4(1.0);
uniform vec4 body_color: hint_color = vec4(1.0);
uniform vec4 heart_color: hint_color = vec4(1.0);
uniform float tolerance: hint_range(0.0,1.0) = 0.5;

uniform vec4 white_mask_color: hint_color = vec4(1.0,0.0,1.0,1.0);
uniform vec4 body_mask_color: hint_color = vec4(1.0,0.0,1.0,1.0);
uniform vec4 heart_mask_color: hint_color = vec4(1.0,0.0,1.0,1.0);

void fragment(){
	vec4 color_a = texture(TEXTURE,UV);
	vec3 color = color_a.rgb;
	float a = color_a.a;
	
	float white_len = length(white_mask_color.rgb);
	float body_len = length(body_mask_color.rgb);
	float heart_len = length(heart_mask_color.rgb);
	
	float b_len = length(color);
	
	vec3 white_mask_norm = white_mask_color.rgb / white_len * b_len;
	vec3 white_color_norm = white_color.rgb / white_len * b_len;
	vec3 body_mask_norm = body_mask_color.rgb / body_len * b_len;
	vec3 body_color_norm = body_color.rgb / body_len * b_len;
	vec3 heart_mask_norm = heart_mask_color.rgb / heart_len * b_len;
	vec3 heart_color_norm = heart_color.rgb / heart_len * b_len;
	
	float white_dist = distance(color, white_mask_norm);
	float body_dist = distance(color, body_mask_norm);
	float heart_dist = distance(color, heart_mask_norm);
	
	color = mix(white_color_norm, color, step(tolerance, white_dist));
	color = mix(body_color_norm, color, step(tolerance, body_dist));
	color = mix(heart_color_norm, color, step(tolerance, heart_dist));
	COLOR = vec4(color, a);
}"

[sub_resource type="ShaderMaterial" id=31]
shader = SubResource( 29 )
shader_param/white_color = Color( 0.94902, 0.866667, 0.960784, 1 )
shader_param/body_color = Color( 0.862745, 0.67451, 0.168627, 1 )
shader_param/heart_color = Color( 0.843137, 0.223529, 0.223529, 1 )
shader_param/tolerance = 0.2
shader_param/white_mask_color = Color( 1, 1, 1, 1 )
shader_param/body_mask_color = Color( 0.847059, 0.298039, 0.298039, 1 )
shader_param/heart_mask_color = Color( 1, 0.615686, 0.898039, 1 )

[sub_resource type="AtlasTexture" id=37]
atlas = ExtResource( 1 )
region = Rect2( 0, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=38]
atlas = ExtResource( 1 )
region = Rect2( 16, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=39]
atlas = ExtResource( 1 )
region = Rect2( 32, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=40]
atlas = ExtResource( 1 )
region = Rect2( 48, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=41]
atlas = ExtResource( 1 )
region = Rect2( 64, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=42]
atlas = ExtResource( 1 )
region = Rect2( 80, 0, 16, 16 )

[sub_resource type="SpriteFrames" id=32]
animations = [ {
"frames": [ SubResource( 37 ), SubResource( 38 ), SubResource( 39 ), SubResource( 40 ), SubResource( 41 ), SubResource( 42 ) ],
"loop": true,
"name": "default",
"speed": 7.02
} ]

[sub_resource type="SpriteFrames" id=33]
animations = [ {
"frames": [ SubResource( 37 ), SubResource( 38 ), SubResource( 39 ), SubResource( 40 ), SubResource( 41 ), SubResource( 42 ) ],
"loop": true,
"name": "default",
"speed": 7.02
} ]

[sub_resource type="ShaderMaterial" id=34]
shader = SubResource( 29 )
shader_param/white_color = Color( 0.94902, 0.866667, 0.960784, 1 )
shader_param/body_color = Color( 0.780392, 0.862745, 0.168627, 1 )
shader_param/heart_color = Color( 0.843137, 0.223529, 0.223529, 1 )
shader_param/tolerance = 0.2
shader_param/white_mask_color = Color( 1, 1, 1, 1 )
shader_param/body_mask_color = Color( 0.847059, 0.298039, 0.298039, 1 )
shader_param/heart_mask_color = Color( 1, 0.615686, 0.898039, 1 )

[sub_resource type="ShaderMaterial" id=35]
shader = SubResource( 29 )
shader_param/white_color = Color( 0.94902, 0.866667, 0.960784, 1 )
shader_param/body_color = Color( 0.862745, 0.85098, 0.168627, 1 )
shader_param/heart_color = Color( 0.843137, 0.223529, 0.223529, 1 )
shader_param/tolerance = 0.2
shader_param/white_mask_color = Color( 1, 1, 1, 1 )
shader_param/body_mask_color = Color( 0.847059, 0.298039, 0.298039, 1 )
shader_param/heart_mask_color = Color( 1, 0.615686, 0.898039, 1 )

[sub_resource type="ShaderMaterial" id=36]
shader = SubResource( 29 )
shader_param/white_color = Color( 0.94902, 0.866667, 0.960784, 1 )
shader_param/body_color = Color( 0.882353, 0.721569, 0.0901961, 1 )
shader_param/heart_color = Color( 0.843137, 0.223529, 0.223529, 1 )
shader_param/tolerance = 0.2
shader_param/white_mask_color = Color( 1, 1, 1, 1 )
shader_param/body_mask_color = Color( 0.847059, 0.298039, 0.298039, 1 )
shader_param/heart_mask_color = Color( 1, 0.615686, 0.898039, 1 )

[node name="TheSecondLaw" type="Control"]
margin_right = 40.0
margin_bottom = 40.0
rect_pivot_offset = Vector2( 304, -96 )
theme = ExtResource( 4 )
script = ExtResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Theory" type="Panel" parent="."]
margin_right = 624.0
margin_bottom = 424.0
rect_pivot_offset = Vector2( -456, -16 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="Theory"]
margin_left = 8.0
margin_top = 8.0
margin_right = 118.0
margin_bottom = 28.0
rect_scale = Vector2( 1.2, 1.2 )
text = "The Law of Independent Assortment"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label2" type="Label" parent="Theory"]
margin_left = 8.0
margin_top = 40.0
margin_right = 616.0
margin_bottom = 106.0
text = "Alleles of two different genes pass into gametes independently of each other."
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label3" type="Label" parent="Theory"]
margin_left = 8.0
margin_top = 96.0
margin_right = 616.0
margin_bottom = 162.0
text = "Let's breed two slimes. The red, small one has allels RRaa and orange, big one has rrbb. "
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label4" type="Label" parent="Theory"]
margin_left = 8.0
margin_top = 200.0
margin_right = 624.0
margin_bottom = 312.0
text = "Since each baby slime can get only one allel of each gene. It will take r from orange one and R from the red one. It will take a from small one and b from the bigger one. We can get the following child from this mix:"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ExcersiseButton" type="Button" parent="Theory"]
margin_left = 200.0
margin_top = 352.0
margin_right = 364.0
margin_bottom = 382.0
text = "Let's Excersise!"

[node name="ReturnButton" type="Button" parent="Theory"]
margin_left = 16.0
margin_top = 384.0
margin_right = 92.0
margin_bottom = 414.0
text = "Challenges"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label5" type="Label" parent="Theory"]
margin_left = 212.0
margin_top = 164.0
margin_right = 264.0
margin_bottom = 196.0
text = "RRaa"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label6" type="Label" parent="Theory"]
margin_left = 408.0
margin_top = 160.0
margin_right = 468.0
margin_bottom = 192.0
text = "rrbb"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime3" type="AnimatedSprite" parent="Theory"]
material = ExtResource( 3 )
position = Vector2( 184, 160 )
scale = Vector2( 3, 3 )
frames = SubResource( 30 )
frame = 3
playing = true

[node name="HealthySlime4" type="AnimatedSprite" parent="Theory"]
material = SubResource( 31 )
position = Vector2( 368, 152 )
scale = Vector2( 4, 4 )
frames = SubResource( 30 )
frame = 3
playing = true

[node name="Label7" type="Label" parent="Theory"]
margin_left = 304.0
margin_top = 304.0
margin_right = 356.0
margin_bottom = 336.0
text = "Rrab"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime5" type="AnimatedSprite" parent="Theory"]
material = ExtResource( 3 )
position = Vector2( 280, 304 )
scale = Vector2( 3.5, 3.5 )
frames = SubResource( 32 )
frame = 5
playing = true

[node name="Excercise" type="Panel" parent="."]
visible = false
margin_right = 624.0
margin_bottom = 424.0
rect_pivot_offset = Vector2( -456, -16 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="Excercise"]
margin_left = 8.0
margin_top = 8.0
margin_right = 421.0
margin_bottom = 35.0
rect_scale = Vector2( 1.2, 1.2 )
text = "The Law of Independent Assortment"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label2" type="Label" parent="Excercise"]
margin_left = 16.0
margin_top = 40.0
margin_right = 608.0
margin_bottom = 106.0
text = "Here you can see two parents with possible gamet listed. Select all correct children."
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CheckAnswerB" type="Button" parent="Excercise"]
margin_left = 200.0
margin_top = 352.0
margin_right = 364.0
margin_bottom = 382.0
text = "Check Answer"

[node name="ReturnButton" type="Button" parent="Excercise"]
margin_left = 16.0
margin_top = 384.0
margin_right = 92.0
margin_bottom = 414.0
text = "Challenges"

[node name="TheoryButton" type="Button" parent="Excercise"]
margin_left = 512.0
margin_top = 384.0
margin_right = 612.0
margin_bottom = 414.0
text = "Return"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime4" type="AnimatedSprite" parent="Excercise"]
material = ExtResource( 3 )
position = Vector2( 228, 100 )
scale = Vector2( 2.7, 2.7 )
frames = SubResource( 33 )
frame = 2
playing = true

[node name="HealthySlime5" type="AnimatedSprite" parent="Excercise"]
material = SubResource( 34 )
position = Vector2( 344, 96 )
scale = Vector2( 3.5, 3.5 )
frames = SubResource( 33 )
frame = 2
playing = true

[node name="Label3" type="Label" parent="Excercise"]
margin_left = 208.0
margin_top = 128.0
margin_right = 252.0
margin_bottom = 171.0
text = "RrAB"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label6" type="Label" parent="Excercise"]
margin_left = 320.0
margin_top = 128.0
margin_right = 368.0
margin_bottom = 160.0
text = "rYab"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label4" type="Label" parent="Excercise"]
margin_left = 40.0
margin_top = 104.0
margin_right = 144.0
margin_bottom = 136.0
text = "Parents:"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label5" type="Label" parent="Excercise"]
margin_left = 40.0
margin_top = 192.0
margin_right = 144.0
margin_bottom = 224.0
text = "Offspring:"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Excercise"]
margin_left = 160.0
margin_top = 168.0
margin_right = 232.0
margin_bottom = 240.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime6" type="AnimatedSprite" parent="Excercise/Button"]
material = ExtResource( 3 )
position = Vector2( 35, 24 )
scale = Vector2( 3.5, 3.5 )
frames = SubResource( 33 )
frame = 1
playing = true

[node name="Label7" type="Label" parent="Excercise/Button"]
margin_left = 16.0
margin_top = 48.0
margin_right = 62.0
margin_bottom = 80.0
text = "RrAa"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button2" type="Button" parent="Excercise"]
margin_left = 248.0
margin_top = 168.0
margin_right = 320.0
margin_bottom = 240.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime6" type="AnimatedSprite" parent="Excercise/Button2"]
material = ExtResource( 3 )
position = Vector2( 40, 32 )
scale = Vector2( 2, 2 )
frames = SubResource( 33 )
frame = 1
playing = true

[node name="Label7" type="Label" parent="Excercise/Button2"]
margin_left = 16.0
margin_top = 48.0
margin_right = 70.0
margin_bottom = 80.0
text = "RyBb"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button3" type="Button" parent="Excercise"]
margin_left = 336.0
margin_top = 168.0
margin_right = 408.0
margin_bottom = 240.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime6" type="AnimatedSprite" parent="Excercise/Button3"]
material = SubResource( 35 )
position = Vector2( 40, 24 )
scale = Vector2( 3.5, 3.5 )
frames = SubResource( 33 )
frame = 1
playing = true

[node name="Label7" type="Label" parent="Excercise/Button3"]
margin_left = 16.0
margin_top = 48.0
margin_right = 62.0
margin_bottom = 80.0
text = "rYab"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button4" type="Button" parent="Excercise"]
margin_left = 424.0
margin_top = 168.0
margin_right = 496.0
margin_bottom = 240.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime7" type="AnimatedSprite" parent="Excercise/Button4"]
material = SubResource( 35 )
position = Vector2( 40, 32 )
scale = Vector2( 2.7, 2.7 )
frames = SubResource( 33 )
frame = 1
playing = true

[node name="Label7" type="Label" parent="Excercise/Button4"]
margin_left = 16.0
margin_top = 48.0
margin_right = 70.0
margin_bottom = 80.0
text = "YyAB"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button5" type="Button" parent="Excercise"]
margin_left = 160.0
margin_top = 256.0
margin_right = 232.0
margin_bottom = 328.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime8" type="AnimatedSprite" parent="Excercise/Button5"]
material = SubResource( 35 )
position = Vector2( 40, 24 )
scale = Vector2( 3.5, 3.5 )
frames = SubResource( 33 )
playing = true

[node name="Label7" type="Label" parent="Excercise/Button5"]
margin_left = 16.0
margin_top = 48.0
margin_right = 66.0
margin_bottom = 80.0
text = "RYAb"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button6" type="Button" parent="Excercise"]
margin_left = 248.0
margin_top = 256.0
margin_right = 320.0
margin_bottom = 328.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime6" type="AnimatedSprite" parent="Excercise/Button6"]
material = ExtResource( 3 )
position = Vector2( 40, 32 )
scale = Vector2( 2, 2 )
frames = SubResource( 33 )
playing = true

[node name="Label7" type="Label" parent="Excercise/Button6"]
margin_left = 16.0
margin_top = 48.0
margin_right = 70.0
margin_bottom = 80.0
text = "RRBb"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button7" type="Button" parent="Excercise"]
margin_left = 336.0
margin_top = 256.0
margin_right = 408.0
margin_bottom = 328.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime9" type="AnimatedSprite" parent="Excercise/Button7"]
material = SubResource( 35 )
position = Vector2( 40, 32 )
scale = Vector2( 2.7, 2.7 )
frames = SubResource( 33 )
frame = 5
playing = true

[node name="Label7" type="Label" parent="Excercise/Button7"]
margin_left = 16.0
margin_top = 48.0
margin_right = 62.0
margin_bottom = 80.0
text = "rYAB"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button8" type="Button" parent="Excercise"]
margin_left = 424.0
margin_top = 256.0
margin_right = 496.0
margin_bottom = 328.0
toggle_mode = true
keep_pressed_outside = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthySlime6" type="AnimatedSprite" parent="Excercise/Button8"]
material = SubResource( 36 )
position = Vector2( 40, 24 )
scale = Vector2( 3.5, 3.5 )
frames = SubResource( 33 )
frame = 5
playing = true

[node name="Label7" type="Label" parent="Excercise/Button8"]
margin_left = 16.0
margin_top = 48.0
margin_right = 62.0
margin_bottom = 80.0
text = "rrAa"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[connection signal="pressed" from="Theory/ExcersiseButton" to="." method="_on_ExcersiseButton_pressed"]
[connection signal="pressed" from="Theory/ReturnButton" to="." method="_on_ReturnButton_pressed"]
[connection signal="pressed" from="Excercise/CheckAnswerB" to="." method="_on_CheckAnswerB_pressed"]
[connection signal="pressed" from="Excercise/ReturnButton" to="." method="_on_ReturnButton_pressed"]
[connection signal="pressed" from="Excercise/TheoryButton" to="." method="_on_TheoryButton_pressed"]
